## datalab

实验要求在 32 位 Linux 环境中进行，考虑到现在大多都是使用 64 位系统了，笔者把 Makefile 中的

```
CFLAGS = -o -Wall -m32
```

改为：

```
CFLAGS = -o -Wall
```

亲测这对结果并没有影响。如果你使用的是 32 位系统，就把我这个修改取消。

### 位运算技巧总结

闷头做了两天，这个实验算是通过了。很多题目都没有思路，特别是一开始那几题经验不足，几乎全是抄的别人的代码，后来自己琢磨多了才好些。

**数值型转布尔型：!!(x)** C 语言把零看作 false，非零 看作 true。两个逻辑非把数值 x 转为代表布尔的 0 或 1

**判断两个数是否相等：!(a ^ b)** 任何数异或自己是 0。如果 a 等于 b  表达式的值为 1，即真

**求相反数：~x+1** 利用了负数补码等于正数原码 + 1 这条性质

**另一个角度看待 | 和 &：** 通常看到 | 和 & 想到的都是 0 和 1 之间做位运算，其实它们两个也可以看作是位级别的逻辑或 || 和逻辑与 &&。比如 `x | y` 只要 x 为真（非0），y 无论真假结果都是真；而 x 为假（0），表达式的值则由 y 决定。同理，`x & y` 只有在 x、y 皆真的情况下为真。

**除以 2 的幂向上取整：** 以 7/2 为例，7 的位级为 0111，除以 2 相当于右移一位，但是直接右移的话会损失掉末尾的 1，相当于向下取整。只要最后一位有一个 1，再加上 1 的话会产生进位，此时再右移相当于向上取整，即 (7 + 1) >> 1。总结起来就是 x 要对除数 k=2^y 向上取整，则有 `(x + (k-1)) >> y`

